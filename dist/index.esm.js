var O=Object.defineProperty;var S=(d,e,a)=>e in d?O(d,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):d[e]=a;var y=(d,e,a)=>(S(d,typeof e!="symbol"?e+"":e,a),a);import C,{useEffect as A,useRef as T}from"react";var E={jak:!0,poi:!1,pano:!1,suggest:!1,api:"full"},s=class{static appendScript(){return new Promise((e,a)=>{let r=document.createElement("script");r.type="text/javascript",r.src="https://api.mapy.cz/loader.js",r.onload=()=>e(),r.onerror=o=>a(o),document.head.appendChild(r)})}static async runInitialLoad({key:e="",...a}){return new Promise(r=>{window.Loader.async=!0,window.Loader.load(e,{...E,...a},()=>{r()})})}static load(e){return s.loadingPromise===null&&(s.loadingPromise=new Promise(async(a,r)=>{try{await s.appendScript(),await s.runInitialLoad(e),a()}catch(o){s.status=3,r(o)}})),s.loadingPromise}static async init(e={}){let{api:a}=e;return s.status===2?!0:s.load(e)}},u=s;y(u,"status",0),y(u,"loadingPromise",null);var w=u;var t=class{static async loadMapIntoContainer(e,{apiConfig:a,...r}={}){await w.init(a);let{center:o={lat:50.0674706,lon:14.4715394},defaultLayer:n="BASE",zoom:p=14,sync:c={isEnabled:!1},controls:f,markers:l=[]}=r,i=t.createMap(e,t.createCoords(o),p);return(a==null?void 0:a.api)!=="simple"?typeof i.addDefaultLayer>"u"?t.logMixingAPIsError("simple"):t.addLayer(i,n).enable():typeof i.addDefaultLayer<"u"&&(t.logMixingAPIsError("full"),t.addLayer(i,n).enable()),c.isEnabled&&t.addSync(i,c.bottom),f&&t.addControls(i,f),l&&t.addMarkers(i,l),i}static createCoords({lat:e,lon:a}){return window.SMap.Coords.fromWGS84(a,e)}static createMap(e,a,r){return new window.SMap(window.JAK.gel(e),a,r)}static addLayer(e,a){return e.addDefaultLayer(window.SMap[`DEF_${a}`])}static addSync(e,a){e.addControl(new window.SMap.Control.Sync({bottomSpace:a}))}static addControls(e,{hasDefault:a,compass:r,mouse:o,keyboard:n}){a&&e.addDefaultControls(),r&&e.addControl(new window.SMap.Control.Compass({title:r.title}),r.style),o&&e.addControl(new window.SMap.Control.Mouse((o.includes("pan")?window.SMap.MOUSE_PAN:0)+(o.includes("wheel")?window.SMap.MOUSE_WHEEL:0)+(o.includes("zoom")?window.SMap.MOUSE_ZOOM:0)+(o.includes("zoom-in")?window.SMap.MOUSE_ZOOM_IN:0)+(o.includes("zoom-out")?window.SMap.MOUSE_ZOOM_OUT:0))),n&&e.addControl(new window.SMap.Control.Keyboard((n.includes("pan")?window.SMap.KB_PAN:0)+(n.includes("zoom")?window.SMap.KB_ZOOM:0)))}static getMarkersLayer(e,a){if(typeof t.markersLayers[a]>"u"){let r=new window.SMap.Layer.Marker;e.addLayer(r),r.enable(),t.markersLayers[a]=r}return t.markersLayers[a]}static addMarkers(e,a,r="default"){let o=t.getMarkersLayer(e,r);a.forEach(({center:n,name:p,options:c})=>{o.addMarker(new window.SMap.Marker(t.createCoords(n),p,c))})}static addMarkerToLayer(e,{center:a,name:r,options:o},n="default"){t.getMarkersLayer(e,n).addMarker(new window.SMap.Marker(t.createCoords(a),r,o))}},M=t;y(M,"markersLayers",{}),y(M,"logMixingAPIsError",e=>{let a="Full",r="Simple",o=e==="full"?a:r;console.error(`Map should be loaded with ${e==="simple"?r:a} API but ${o} API is already loaded. Mixing APIs isn't supported by Mapy.cz API.`),console.info(`Map now uses ${o} API.`)});var m=M;var L=({center:d,zoom:e,defaultLayer:a,sync:r,controls:o,markers:n,apiConfig:p,...c})=>{let f=T(null),l=T(null);return A(()=>{l.current&&m.loadMapIntoContainer(l.current,{center:d,zoom:e,defaultLayer:a,sync:r,controls:o,markers:n,apiConfig:p}).then(i=>f.current=i)},[l.current]),C.createElement("div",{ref:l,...c})},z=L;export{z as default};
//# sourceMappingURL=index.esm.js.map
